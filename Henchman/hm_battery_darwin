#include <gplv2>

# return status, and batter percentage
function hm_battery_darwin () {
	local batt="$(pmset -g batt)"
	typeset -a battery_lines
	battery_lines=(${(f)batt})

	local charge percentage tab

	case $battery_lines[2] in
		*\ charging\;*)    charge='charging'    ;;
		*\ charged\;*)     charge='charged'     ;;
		*\ discharging\;*) charge='discharging' ;;
	esac
	
	tab=$(printf '\t')
	percentage=${battery_lines[2]##*$tab}
	percentage=${percentage%\%*}
	
	echo "$charge" "$percentage"

}
